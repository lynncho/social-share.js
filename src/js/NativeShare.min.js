!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["NativeShare.js"]=t():e["NativeShare.js"]=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"Share",(function(){return T})),r.d(t,"QQMobileBrowser",(function(){return O})),r.d(t,"UCIosBrowser",(function(){return P})),r.d(t,"UCAndroidBrowser",(function(){return W})),r.d(t,"BaiduAndroidBrowser",(function(){return U})),r.d(t,"BaiduIosBrowser",(function(){return z})),r.d(t,"SogouIosBrowser",(function(){return $})),r.d(t,"Wechat",(function(){return I})),r.d(t,"Others",(function(){return E})),r.d(t,"QQIos",(function(){return L})),r.d(t,"QQAndroid",(function(){return Z})),r.d(t,"QZone",(function(){return R})),r.d(t,"shareToQQ",(function(){return k})),r.d(t,"shareToQZone",(function(){return x})),r.d(t,"shareToWeibo4Web",(function(){return M})),r.d(t,"shareToQZone4Web",(function(){return j}));const n=navigator.userAgent,o=/(iPad).*OS\s([\d_]+)/.test(n),i=/(iPod)(.*OS\s([\d_]+))?/.test(n),a=!o&&/(iPhone\sOS)\s([\d_]+)/.test(n),s=o||i||a,c=/(Android);?[\s\/]+([\d.]+)?/.test(n),l=/micromessenger/i.test(n),u=/QQ\/([\d\.]+)/.test(n),h=/Qzone\//.test(n),d=/MQQBrowser/i.test(n)&&!l&&!u,f=/UCBrowser/i.test(n),p=/mobile.*baidubrowser/i.test(n),m=/SogouMobileBrowser/i.test(n);/baiduboxapp/i.test(n);function g(){}function b(e,t=g){const r=document.getElementsByTagName("script")[0],n=document.createElement("script");n.src=e,n.async=!0,r.parentNode.insertBefore(n,r),n.onload=t}function S(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r}function w(e){if(s)location.href=e;else{var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),2e3)}}function y(e,t=!1){const r=[];for(let n in e)t?r.push(`${n}=${encodeURIComponent(e[n])}`):r.push(`${n}=${e[n]}`);return r.join("&")}const _={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,n,o,i,a,s,c="",l=0;for(e=_._utf8_encode(e);l<e.length;)o=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(r=e.charCodeAt(l++))>>4,a=(15&r)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),c=c+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return c},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}};const q=document.querySelector("meta[name=description]"),v=document.querySelector("link[rel*=icon]");var D={link:location.href,title:document.title,desc:Object(q).content||"",icon:Object(v).href||`${location.protocol}//${location.hostname}/favicon.ico`,from:"",success:g,fail:g,trigger:g};function C(e){return y({share_id:924053302,url:_.encode(e.link),title:_.encode(e.title),description:_.encode(e.desc),previewimageUrl:_.encode(e.icon),image_url:_.encode(e.icon)})}function k(){w(`${s?"mqqapi://share/to_fri?src_type=web&version=1&file_type=news":"mqqapi://share/to_fri?src_type=isqqBrowser&version=1&file_type=news"}&${C(D)}`)}function x(){w(`${s?"mqqapi://share/to_fri?file_type=news&src_type=web&version=1&generalpastboard=1&shareType=1&cflag=1&objectlocation=pasteboard&callback_type=scheme&callback_name=QQ41AF4B2A":"mqqapi://share/to_qzone?src_type=isqqBrowser&version=1&file_type=news&req_type=1"}&${C(D)}`)}function j(){const e={url:D.link,title:D.title,pic:D.icon,desc:D.desc};location.href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+y(e,!0)}function M(){const e={url:D.link,title:D.title,pic:D.icon};location.href="http://service.weibo.com/share/share.php?"+y(e,!0)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class T{constructor(e){Q(this,"_shareData",D),Q(this,"_config",{syncDescToTag:!1,syncIconToTag:!1,syncTitleToTag:!1}),this.setConfig(e)}getShareData(){return S({},this._shareData)}setShareData(e={}){var t,r;S(this._shareData,e),this._config.syncDescToTag&&(t=this._shareData.desc,q?q.content=t:document.head.insertAdjacentHTML("beforeend",`<meta name="description" content="${t}">`)),this._config.syncIconToTag&&(r=this._shareData.icon,v?v.href=r:document.head.insertAdjacentHTML("beforeend",`<link rel="shortcut icon" href="${r}">`)),this._config.syncTitleToTag&&function(e){document.title=e}(this._shareData.title)}setConfig(e={}){S(this._config,e)}getConfig(){return S({},this._config)}}class O extends T{constructor(e){super(e),b("https://jsapi.qq.com/get?api=app.share")}call(e="default",t){this.setShareData(t);const r=this.getShareData(),n=this.constructor.commamdMap[String(e).toLowerCase()];browser.app.share({title:r.title,description:r.desc,url:r.link,img_url:r.icon,from:r.from,to_app:n})}}var A,B,N;N={wechattimeline:8,wechatfriend:1,qqfriend:4,qzone:3,weibo:11,copyurl:10,more:5,generateqrcode:7,default:void 0},(B="commamdMap")in(A=O)?Object.defineProperty(A,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):A[B]=N;class P extends T{constructor(e){super(e)}call(e="default",t){this.setShareData(t);const r=this.getShareData(),n=this.constructor.commamdMap[String(e).toLowerCase()];ucbrowser.web_shareEX?ucbrowser.web_shareEX(JSON.stringify({title:r.title,content:r.desc,sourceUrl:r.link,imageUrl:r.icon,source:r.from,target:n})):ucbrowser.web_share(title,desc,link,n,"",from,"")}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(P,"commamdMap",{wechattimeline:"kWeixinFriend",wechatfriend:"kWeixin",qqfriend:"kQQ",qzone:"kQZone",weibo:"kSinaWeibo",default:void 0});class W extends T{constructor(e){super(e)}call(e="default",t){this.setShareData(t);const r=this.getShareData(),n=this.constructor.commamdMap[String(e).toLowerCase()];ucweb.startRequest("shell.page_share",[r.title,r.desc,r.link,n,"",r.from,r.icon])}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(W,"commamdMap",{wechattimeline:"WechatTimeline",wechatfriend:"WechatFriends",qqfriend:"QQ",qzone:"Qzone",weibo:"SinaWeibo",default:""});class U extends T{constructor(e){super(e)}call(e,t){this.setShareData(t);const r=this.getShareData();_flyflowNative.exec("bd_utils","shareWebPage",JSON.stringify({title:r.title,content:r.desc,landurl:r.link,imageurl:r.icon,shareSource:r.from}),"")}}class z extends T{constructor(e){super(e)}call(e,t){this.setShareData(t);const r=this.getShareData();location.href="baidubrowserapp://bd_utils?action=shareWebPage&params="+encodeURIComponent(JSON.stringify({title:r.title,content:r.desc,imageurl:r.icon,landurl:r.link,mediaType:0,share_type:"webpage"}))}}class $ extends T{constructor(e){super(e)}call(e,t){this.setShareData(t);const r=this.getShareData();SogouMse.Utility.shareWithInfo({shareTitle:r.title,shareContent:r.desc,shareImageUrl:r.icon,shareUrl:r.link})}}class I extends T{constructor(e){super(e),this.setConfig(e)}call(e,t){this.setShareData(t)}setConfig(e){super.setConfig(e),this.init(this.getConfig().wechatConfig)}init(e){e&&b("https://res.wx.qq.com/open/js/jweixin-1.4.0.js",()=>{wx.config(S({debug:!1,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","updateAppMessageShareData","updateTimelineShareData"]},e));const t=this._shareData,r={};Object.defineProperty(r,"trigger",{get:()=>(...e)=>{S(r,{title:t.title,desc:t.desc,link:t.link,imgUrl:t.icon,success:t.success,fail:t.fail,cancel:t.fail}),t.trigger(...e)},set(e){t.trigger=e},enumerable:!0}),wx.ready(()=>{wx.onMenuShareAppMessage(r),wx.onMenuShareQQ(r),wx.onMenuShareQZone(r),wx.onMenuShareWeibo(r),wx.onMenuShareTimeline(r),wx.updateAppMessageShareData(r),wx.updateTimelineShareData(r)})})}}class E extends T{constructor(e){super(e)}call(e="default",t){if(this.setShareData(t),!navigator.share){if("weibo"===(e=String(e).toLowerCase()))M();else if("qqfriend"===e)k();else{if("qzone"!==e)throw new Error(`the browser may not support command ${e}!`);x()}return}const r=this.getShareData(),n={url:r.link,title:r.title,text:r.desc};navigator.share(n).then(r.success).catch(r.fail)}}class L extends T{constructor(e){super(e),this.init()}call(e="default",t){this.setShareData(t),mqq.ui.showShareMenu()}init(){b("https://open.mobile.qq.com/sdk/qqapi.js",()=>{const e=this._shareData;mqq.ui.setOnShareHandler(t=>{mqq.ui.shareMessage({back:!0,share_type:t,title:e.title,desc:e.desc,share_url:e.link,image_url:e.icon,sourceName:e.from},t=>{0===t.retCode?e.success(t):e.fail(t)})})})}}class Z extends T{constructor(e){super(e),this.init()}setShareData(e){super.setShareData(e);const t=this.getShareData();(function(e){const t=document.createElement("a");return t.href=e,t.hostname})(t.link)!==location.hostname&&(t.link=location.href,console.warn("安卓的QQ自带浏览器分享url必须跟页面url同一个域名，已自动为你设置为当前页面的url"));try{mqq.data.setShareInfo({share_url:t.link,title:t.title,desc:t.desc,image_url:t.icon},e=>{!0!==e&&console.warn(e)})}catch(e){}}call(e="default",t){this.setShareData(t),mqq.ui.showShareMenu()}init(){b("https://open.mobile.qq.com/sdk/qqapi.js",()=>{this.setShareData()})}}class R extends T{constructor(e){super(e),this.init()}call(e="default",t){this.setShareData(t);const r=this.getShareData(),n=[],o=[],i=[],a=[];for(let e=0;e<5;e++)n.push(r.icon),a.push(r.link),o.push(r.title),i.push(r.desc);QZAppExternal.setShare(({code:e})=>{0!=e&&(this.hasSomethingWrong=!0)},{type:"share",image:n,title:o,summary:i,shareURL:a})}setShareData(e){try{this.call("default",e)}catch(e){}}init(){b("https://qzonestyle.gtimg.cn/qzone/phone/m/v4/widget/mobile/jsbridge.js",()=>{this.call("default")})}}let F;F=l?I:u&&s?L:u&&c?Z:h?R:d?O:f&&s?P:f&&c?W:p&&c?U:p&&s?z:m&&s?$:E,window.NativeShare=F;t.default=F}])}));